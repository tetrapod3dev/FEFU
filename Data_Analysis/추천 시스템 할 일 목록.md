# 추천 시스템 할 일 목록

## 0. 정확도 측정 뭘로 할 것인가?

> 저희 데이터는 아래와 같은 조건으로 Error를 측정해야 됩니다.
>
> 1. scale-dependent measure X
>
>     * 100번 추천했는데 99번 조회한 경우와
>     * 10번 추천했는데 9번 조회한 경우는 차이가 존재해야 됨
>
> 2. outlier robuts
>
>     * 사용자는 원하는 카테고리의 물품만 조회할 수도 있음
>     * 각 항목간의 values가 균일하지 않고, 다수의 outlier 포함 가능
>
> 3. 데이터 특성을 잘 반영해야 됨
>
>     1. 실제값 / 예측값이 0 혹은 0에 가까울 확률이 높은 데이터 셋
>
>         실제 특정 카테고리 제품을 조회한 값(실제값)이 0 혹은 0에 가까운 값이 다수 존재
>
>     2. 과대평가에 더 큰 패널티 필요
>
>         1. 30번 볼 것이다 < 실제 40번 봄 : 과소 평가
>         2. 30번 볼 것이다 > 실제 20번 봄 : 과대 평가 / 안 볼 광고에 더 많이 노출됨 / 패널티 필요
>
> 아래는 후보군과, 제가 생각한 문제점들입니다.

### 1.1 RMSE

1. scale-dependent measure

    1. 100번 추천했는데 99번 조회한 경우
    2. 10번 추천했는데 9번 조회한 경우

    * 둘 다 동일한 Error (1)로 계산됨

2. Outlier가 다수 존재할 경우 문제가 될 수 있음

### 1.2 MAPE

* 비율에 따라 계산되기 때문에 조금 더 효율적인것같지만

    실제값이 0이거나, 0에 가까운 경우 대처하기 어려움

* 실제로 2번 본 경우

    1. 0번 / 1번이라고 예측(추천) : 100% / 50% 오차
    2. 3번 / 4번 / 5번이라고 예측(추천) : 50% / 100% / 150% 오차

    * 예측이 더 큰경우 제한없는 패널티 가능

### 1.3 sMAPE

* 가능성은 있어보이지만... 0이 많은 데이터 특성 상 예측값도 0에 가까울 가능성이 높음

    (0에 가까운 데이터가 많은 경우 대처하기 어려움..)

* 과소추천에 더 큰 패널티를 줌... (반대)

### 1.4 RMSLE

* 여러 장점이 있어서 채택하기 괜찮아보임
* 대신 과소추천에 큰 패널티를 주는 것은 문제 (sMAPE와 동일)

### 1.5 NRMSE (정규화된 RMSE)

* 검색 필요...



## 1. 기본 추천 시스템 (그룹화 + 개인화)

> 데이터가 적을 경우 사용할 기본적인 추천 시스템입니다.
>
> 사용자가 속한 그룹의 평균값을 예측값으로 사용

### 1-1. 코드 간결화

* `recom_simple1`과 `recom_simple2`를 class의 method로 넣어주려고 합니다.

    (MF에서 하는 것처럼)

### 1-2. 고민 중인 사항

* 현재는 사용자가 속한 그룹의 다른 사용자들이 1번이라도 조회한 경우만 계산합니다.

* 이걸 1번이라도 조회한 경우 그룹의 평균값을 가져오고,

    아닌 경우 전체의 평균값을 가져오도록 수정하려고 합니다.

* 적용할 경우의 장점

    * Model의 성능이 향상됩니다. (추측)
    * 이후 IBCF와 비교할 때 편해질 것같습니다.

* 적용할 경우의 단점

    * 음...... 시간이 좀 더 걸릴 것 같습니다?
    * 평균은 믿으면 안 됩니다?



## 2. 아이템 기반 협업 필터링 (IBCF: Item Based Collaborative Filtering)

### 2-1. 상관계수 뭘로 할지 정하기

* 현재는 cosine similarity와 Pearson correlation coefficient로 코드가 작성되어 있는데

    저는 상관계수의 특징은 잘 모르겠습니다.. 좀 더 학습 후 결정하거나 cosine similarity를 그냥 쓸 계획입니다.

### 2-2. 속도 향상 시키기

* UBCF보다는 빠르지만 아직까지는 조금 불안한 속도입니다..
* 속도를 향상시킬 방법을 찾아볼게요!

### 2-3.  언제 전환할 것인가?

* 언제 기본 추천 시스템에서 IBCF로 넘어올지 선택하는 ... 그거입니다.

* 아마도 지금 생각으로는 2가지중 하나인데요...

    1. Model들 간의 비교
        1. 해당 유저의 DB에 입력한 데이터를 가져옴
        2. 해당 데이터에 대해서 각각의 Model로 예측값 계산
        3. 실제값과 오차 계산
        4. 어느정도 차이가 나거나..하면 교체 (N개 카테고리 M개 이상)
    2. IBCF Model과 비교
        1. 해당 유저의 DB에 입력한 데이터를 가져옴
        2. 해당 데이터에 대해서 IBCF로 예측값 계산
        3. 실제값과 오차 계산
        4. IBCF Model의 오차와 비교....???

* 1번의 경우 앞서 언급한 (기본추천시스템에서) 고민중인 사항이 적용되야 가능할 것이고,

    (사용자가 속한 그룹이 특정 카테고리를 조회한 적 없는 경우 오차가 0이 됨)

* 2번의 경우 오차가 IBCF Model보다는 대부분의 경우 작을 수 밖에 없어서 고민이 됩니당..



## 3. Matrix Factorization

* 계에에에속 수정해야됩니다...





## 4. 추천시스템 성능 평가 지표

* 클릭률(CTR) 사용 예정
    * 조회/구매 하지 않은 제품만 추천리스트에 포함될 예정
    * 추천 페이지 방문 횟수와 추천 탭의 아이템 클릭 횟수로 비교