# 추천 시스템 구축 로드맵

> 중고거래 제품의 카테고리(여성신발, 축구공 등)를 고객에서 추천해주는 시스템

## 1. 데이터 생성

### 1-1. 카테고리 데이터 생성

* 카테고리 선정
    * 9개 대분류 / 114개 중분류 / 419개 소분류 / **분류 변경**
* 카테고리를 DB에 입력
    * 노가다 시즌 1.... 아마 1시간이면 될거같아요 (아님 코드로 돌리거나)

### 1-2. 중고거래 물품 데이터 생성

* 각 카테고리별로 2~3개의 중고 물품 생성
* 직접 하긴 좀 힘드니까 이미지 서버에 사진 올리고, 미리 링크 받아 놓기

### 1-3. 유저 데이터 생성

* 유저는 한 300명정도...? (원하는 만큼 생성 가능)

### 1-4. 중고거래 판매 데이터 생성

* 위에서 생성한 1000여개의 데이터에 판매 정보 생성

### 1-5. 중고거래 물품 조회 데이터 생성

* 1000개 이상 필요합니당..



## 2. CF/MF용 기초 데이터 생성

### 2-1.  데이터 분석용 구매 데이터 생성

* User-Category-(조회/구매 횟수)로 이루어진 형태의 데이터 필요
* purchase-details Table에서 buyer-product_no를 가져오고.... groupby size하면 될듯



## 어떤 값을 예측할 것인가?

* 특정 사용자가 어떤 카테고리의 제품을 몇번 조회/구매 할 것인가?를 예측해서

    높은 값을 가지는 카테고리를 추천!



### Error 측정 방식

* 우리 사이트 데이터의 특징
    1. 사용자는 원하는 카테고리의 물품만 조회할 것
        * 각 항목간의 values값 차이가 클 수 있음
        * Outlier 존재 가능
    2. 실제 특정 카테고리 제품을 조회한 값(실제값)이 0 혹은 0에 가까운 값이 다수 존재
    3. 과대평가에 더 큰 패널티를 줘야 됨
        * 30번 볼 것이다 < 실제 40번 봄 : 과소 평가
        * 30번 볼 것이다 > 실제 20번 봄 : 과대 평가 / 안 볼 광고에 더 많이 노출됨 / 패널티 필요



* 기존에는 RMSE 사용해서 코드를 작성

    * 문제점 : 크기 의존적....

        1. 28번 볼 것이라고 예상한 사람이 27번 본 경우
        2. 1번 볼 것이라고 예상한 사람이 0번 본 경우

        * 동일한 Error로 계산됨
        * 우리 사이트의 경우 특정 카테고리의 제품이 여러개 올라올 경우 Outlier가 있을 수도...

* MAPE

    * 비율에따라 계산되기 때문에 조금 더 효율적인것같지만....

        우리 데이터의 경우 사용자가 한번도 보지 않은 카테고리가 다수 존재할 수 있음.

        실제값이 0인 경우가 되게 자주 있을 것...

        + 실제로 2번 본 경우
            + 0번 / 1번이라고 예측(추천) : 100% / 50% 오차
            + 3번 / 4번 / 5번이라고 예측(추천) : 50% / 100% / 150% 오차
        + 예측이 더 큰경우 제한없는 패널티 가능

* RMSLE

    * 여러 장점이 있어서 채택하기 괜찮아보임
    * 대신 Under Estimation에 큰 패널티를 주는 것은 문제
        * 30번 볼 것이다 < 실제 40번 봄 : 현재 더 큰 패널티...
        * 30번 볼 것이다 > 실제 20번 봄 : 안 볼 광고에 더 많이 노출됨
        * 보지 않을 제품을 여러번 추천할 경우 (over estimation인 경우) 패널티가 더 커야될 것



* 후보군
    * sMAPE
    * WMAPE



### 추천시스템 성능 평가 지표

* 클릭률(CTR) 사용 예정
    * 조회/구매 하지 않은 제품만 추천리스트에 포함될 예정
    * 추천 페이지 방문 횟수와 추천 탭의 아이템 클릭 횟수로 비교